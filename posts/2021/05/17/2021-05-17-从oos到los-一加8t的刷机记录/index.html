<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>从OOS到LOS -- 一加8T的刷机记录 | 烂杯的博客</title><meta name=keywords content="android,lineageos,oxygenos,oneplus8t,flashing"><meta name=description content="从 OxygenOS 到 LineageOS 的刷机记录贴"><meta name=author content="Me"><link rel=canonical href=https://cgcel.github.io/posts/2021/05/17/2021-05-17-%E4%BB%8Eoos%E5%88%B0los-%E4%B8%80%E5%8A%A08t%E7%9A%84%E5%88%B7%E6%9C%BA%E8%AE%B0%E5%BD%95/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style><link rel=preload href=/images/avatar.jpg as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://cgcel.github.io/images/avatar.jpg><link rel=icon type=image/png sizes=16x16 href=https://cgcel.github.io/images/avatar.jpg><link rel=icon type=image/png sizes=32x32 href=https://cgcel.github.io/images/avatar.jpg><link rel=apple-touch-icon href=https://cgcel.github.io/images/avatar.jpg><link rel=mask-icon href=https://cgcel.github.io/images/avatar.jpg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="从OOS到LOS -- 一加8T的刷机记录"><meta property="og:description" content="从 OxygenOS 到 LineageOS 的刷机记录贴"><meta property="og:type" content="article"><meta property="og:url" content="https://cgcel.github.io/posts/2021/05/17/2021-05-17-%E4%BB%8Eoos%E5%88%B0los-%E4%B8%80%E5%8A%A08t%E7%9A%84%E5%88%B7%E6%9C%BA%E8%AE%B0%E5%BD%95/"><meta property="og:image" content="https://cgcel.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-05-17T13:45:02+08:00"><meta property="article:modified_time" content="2021-05-17T13:45:02+08:00"><meta property="og:site_name" content="CGCEL BLOG"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cgcel.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="从OOS到LOS -- 一加8T的刷机记录"><meta name=twitter:description content="从 OxygenOS 到 LineageOS 的刷机记录贴"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://cgcel.github.io/posts/"},{"@type":"ListItem","position":2,"name":"从OOS到LOS -- 一加8T的刷机记录","item":"https://cgcel.github.io/posts/2021/05/17/2021-05-17-%E4%BB%8Eoos%E5%88%B0los-%E4%B8%80%E5%8A%A08t%E7%9A%84%E5%88%B7%E6%9C%BA%E8%AE%B0%E5%BD%95/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"从OOS到LOS -- 一加8T的刷机记录","name":"从OOS到LOS -- 一加8T的刷机记录","description":"从 OxygenOS 到 LineageOS 的刷机记录贴","keywords":["android","lineageos","oxygenos","oneplus8t","flashing"],"articleBody":"前言 距离一加 8T 的发布已经过去了大半年, 据说一加 8T 的 ColorOS 会在6月底释出, 大家都说大氢亡了🥴, 但是我不用氢啊🤡, 加上氧最近也用的有些腻了, 正好前一段时间关注到 8T 的 xda 论坛 挺活跃的, 已经有不少的 ROM 可以刷了:\n于是我就打算利用空闲时间刷一刷手里的 8T 解解馋, 玩累了正好回 ColorOS (如果一加不鸽的话…)\n本篇将分为两大部分来记录, 分别是:\n OOS 刷 LOS 的记录 LOS 刷回 OOS 并 root 的记录  OOS 刷 LOS 准备 在准备刷机前, 我们需要 备份好数据, 并安装或下载好以下内容 (下载包以本篇博客日期为准, 如参考则需尽量下载最新包):\n adb (基本操作了, 没有adb就无法通过指令控制手机) 9008救砖包 (随时准备好救砖) lineage-18.1-20210513-nightly-kebab-signed.zip lineage-18.1-20210513-recovery-kebab.img copy-partitions-20210323_1922.zip GAPPS Magisk-v23.0.apk  具体步骤 详细刷机步骤参考 官方文档 , 下面我将按照具体指令来总结, 这样比较明了, 不用看详细的文字解释:\n  进入 开发者选项 并开启 OEM 解锁 以及 USB调试\n  检测 adb 连接情况后进入 bootloader, 然后解锁手机:\n1 2 3 4  adb devices adb reboot bootloader fastboot devices fastboot oem unlock   通过音量键和电源键, 将手机解锁, 手机将清除所有数据, 完成初始化后, 继续进入 开发者选项 并开启 OEM 解锁 以及 USB调试\n  重启至 bootloader, 刷入 recovery:\n1 2 3 4 5  adb devices adb reboot bootloader fastboot devices fastboot flash recovery lineage-18.1-20210513-recovery-kebab.img fastboot reboot recovery     在 recovery 中, 将 A分区数据复制到 B分区, 避免B分区固件太久导致黑砖, 点击 “Apply Update”, 然后点击 “Apply from ADB”:\n1  adb sideload copy-partitions-20210323_1922.zip    签名验证失败的话, 点击 “Yes” 继续刷入即可.\n 点击 “Advanced”, 然后点击 “Reboot to recovery”\n  在 recovery 主界面 点击 “Factory Reset” 双清 (不能漏这一步, 某则脏刷将导致各种问题, 我第一次刷忘记双清, 直接 boot loop 加定位失灵), 然后点击 “Apply Update”, 点击 “Apply from ADB” 进入 adb sideload 模式刷入 LineageOS:\n1  adb sideload lineage-18.1-20210513-nightly-kebab-signed.zip    签名验证失败的话, 点击 “Yes” 继续刷入即可.\n   (可选操作): 刷入额外的包, 如 GAPPS, Magisk等:\n 如果要刷 GAPPS, 需要在重启进入系统前将其刷入, 其他包则可以在通过系统初始化后重启至 recovery 再刷.\n 下面将以本次刷机为例, 记录刷入 GAPPS 和 Magisk 的过程:\n重启至 recovery, 然后进入 sideload 模式:\n1  adb sideload MindTheGapps-11.0.0-arm64-20210412_124247.zip   在 recovery 主菜单点击 “Reboot system now”, 即可开机进入系统, 完成初始化后检查谷歌全家桶能否正常运行, 无误后继续以下步骤:\n1 2  adb install Magisk-v23.0.apk adb reboot recovery   重启至 recovery 后, 进入 sideload 模式, 同时将电脑中的 Magisk-v23.0.apk 复制一份, 改名为 Magisk-v23.0.zip:\n1  adb sideload Magisk-v23.0.zip     在 recovery 主菜单点击 “Reboot system now”, 即可开机进入系统.\n  发现的问题 刷 LOS 的过程中发现了两个问题, 问题和解决方法如下:\n  定位不正常\n第一次刷入时忘记双清, 开机直接 boot loop, 解决后进入系统, 第二天上班时差点钉钉打卡无法定位…\n解决方法: 刷入 LOS 前双清, 切忌 dirty flash.\n  移动网络网速不正常\n第二次刷入时一切正常, 但切换至移动网络时网速只有 200+k/s, 明显不是5G该有的网速, 后到lineage的 reddit 论坛中发现有人有 同样的情况, 只需根据运营商修改 APN 即可. 刷回 OOS 后, 我进入设置对默认 APN 进行了截图 (此处以联通为例).\n解决方法: 刷入 LOS 后进入设置, 按照截图修改参数即可.\n  截图 正常使用后的一些截图如下:\n修改 APN 后的 speedtest:\n更新界面:\nMagisk 界面:\nLOS 回 OOS 并 ROOT 准备  adb (基本操作了, 没有adb就无法通过指令控制手机) 9008救砖包 (随时准备好救砖) Magisk-v23.0.apk OOS全量包 (这里用的是 OOS Open Beta 4) Payload Dumper for Win  具体步骤  以下步骤以 LOS 刷至 OOS 为例, 刷机前记得 做好备份.\n  参考视频: https://www.youtube.com/watch?v=zKd_mO7f1eM\n   关机, 静置手机待其完全关闭, 电脑解压并打开下载好的 救砖包, 打开 MsmDownloadTool V4.0.exe, 选择 Other并下一步, target 项选择 O2, 表示刷入 OOS.\n  同时按下手机的 音量+ 和 音量-, 插入 USB 线与电脑连接, 待出现 COM 口后, 点击 start, 看到开始加载进度条后方可松开音量键, 等待刷机完毕后, 手机将清除所有数据并自动重启.\n  完成初始化后进入系统, 打开 开发者选项 并勾选 OEM 解锁 以及 USB 调试.\n  解锁手机:\n1 2 3 4  adb decices adb reboot bootloader fastboot devices fastboot oem unlock   通过音量键和电源键确认解锁手机, 然后完成初始化进入系统.\n  将下载好的 OOS Open Beta 4 全量包放入手机根目录, 进入设置, 系统升级, 选择 从本地更新, 然后选择根目录中的全量包进行 full update, 安装完毕后重启手机.\n  在电脑端, 将下载好的 OOS 全量包中的 payload.bin 置入 “/payload_dumper-win64” 的 “/input” 文件夹中, 运行 payload_dumper.exe, 运行完毕后, 在 “/output” 中找到 boot.img 并复制到手机目录中, 如 “/Download” 中.\n  安装并打开 “Magisk Manager”, 在首页点击 “安装”, 选择 “选择并修补一个文件”, 选择 “/Download/boot.img” 后点击 “开始”, Magisk Manager 将生成一个命名类似 magisk_patch.img 的文件在 “/Download” 中, 将其复制进电脑.\n  将手机连接至电脑, 输入以下指令:\n1 2 3 4  adb devices adb reboot bootloader fastboot devices fastboot flash boot magisk_patch.img   刷入完毕后重启至系统, 打开 Magisk Manager 检查 root 状态.\n  结尾 Root 之后, 又可以玩回很多以前的东西了, 比如把字体改成 Ubuntu 格式, 启用黑域, Swift Backup, Quick Switch等等, 倒是最近的 Xposed 框架又有新的 LSPosed, 简称 “LSP”, 是个轻量级的框架, 模块商店的模块还很少, 但是装个 WX 模块还是绰绰有余的.\n再说到动画方面, LOS 的动画流畅度简直吊打 OOS 的, 就比如点开微信信息推送和横屏返回桌面的动画, 一经比较便高下立判, OOS 小修小补这么久, 这个导航栏手势改得真是没眼看…\n当然, 稳定性方面 OOS 肯定是 LOS 比不了的, 毕竟 LOS 只是一个个人维护的第三方 ROM, 没记错的话开发者 Luk1337 已经从一加6一路维护到一加8T了, 不愧是大佬👍\n","wordCount":"517","inLanguage":"en","datePublished":"2021-05-17T13:45:02+08:00","dateModified":"2021-05-17T13:45:02+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://cgcel.github.io/posts/2021/05/17/2021-05-17-%E4%BB%8Eoos%E5%88%B0los-%E4%B8%80%E5%8A%A08t%E7%9A%84%E5%88%B7%E6%9C%BA%E8%AE%B0%E5%BD%95/"},"publisher":{"@type":"Organization","name":"烂杯的博客","logo":{"@type":"ImageObject","url":"https://cgcel.github.io/images/avatar.jpg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://cgcel.github.io/ accesskey=h title="烂杯的博客 (Alt + H)"><img src=https://cgcel.github.io/images/avatar.jpg alt=logo aria-label=logo height=35>烂杯的博客</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://cgcel.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://cgcel.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://cgcel.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://cgcel.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://cgcel.github.io/posts/>Posts</a></div><h1 class=post-title>从OOS到LOS -- 一加8T的刷机记录</h1><div class=post-description>从 OxygenOS 到 LineageOS 的刷机记录贴</div><div class=post-meta><span title="2021-05-17 13:45:02 +0800 CST">May 17, 2021</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2021/05/17/2021-05-17-%e4%bb%8eOOS%e5%88%b0LOS%20--%20%e4%b8%80%e5%8a%a08T%e7%9a%84%e5%88%b7%e6%9c%ba%e8%ae%b0%e5%bd%95.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%89%8d%e8%a8%80 aria-label=前言>前言</a></li><li><a href=#oos-%e5%88%b7-los aria-label="OOS 刷 LOS">OOS 刷 LOS</a><ul><li><a href=#%e5%87%86%e5%a4%87 aria-label=准备>准备</a></li><li><a href=#%e5%85%b7%e4%bd%93%e6%ad%a5%e9%aa%a4 aria-label=具体步骤>具体步骤</a></li><li><a href=#%e5%8f%91%e7%8e%b0%e7%9a%84%e9%97%ae%e9%a2%98 aria-label=发现的问题>发现的问题</a></li><li><a href=#%e6%88%aa%e5%9b%be aria-label=截图>截图</a></li></ul></li><li><a href=#los-%e5%9b%9e-oos-%e5%b9%b6-root aria-label="LOS 回 OOS 并 ROOT">LOS 回 OOS 并 ROOT</a><ul><li><a href=#%e5%87%86%e5%a4%87-1 aria-label=准备>准备</a></li><li><a href=#%e5%85%b7%e4%bd%93%e6%ad%a5%e9%aa%a4-1 aria-label=具体步骤>具体步骤</a></li></ul></li><li><a href=#%e7%bb%93%e5%b0%be aria-label=结尾>结尾</a></li></ul></div></details></div><div class=post-content><h2 id=前言>前言<a hidden class=anchor aria-hidden=true href=#前言>#</a></h2><p>距离一加 8T 的发布已经过去了大半年, 据说一加 8T 的 ColorOS 会在6月底释出, 大家都说大氢亡了🥴, 但是我不用氢啊🤡, 加上氧最近也用的有些腻了, 正好前一段时间关注到 8T 的 <a href=https://forum.xda-developers.com/c/oneplus-8t.11579/>xda 论坛</a> 挺活跃的, 已经有不少的 ROM 可以刷了:</p><p><img loading=lazy src=Snipaste_2021-05-17_23-02-35.jpg alt="oneplus 8t xda forum"></p><p>于是我就打算利用空闲时间刷一刷手里的 8T 解解馋, 玩累了正好回 ColorOS (如果一加不鸽的话&mldr;)</p><p>本篇将分为两大部分来记录, 分别是:</p><ul><li>OOS 刷 LOS 的记录</li><li>LOS 刷回 OOS 并 root 的记录</li></ul><h2 id=oos-刷-los>OOS 刷 LOS<a hidden class=anchor aria-hidden=true href=#oos-刷-los>#</a></h2><h3 id=准备>准备<a hidden class=anchor aria-hidden=true href=#准备>#</a></h3><p>在准备刷机前, 我们需要 <strong>备份好数据</strong>, 并安装或下载好以下内容 (下载包以本篇博客日期为准, 如参考则需尽量下载最新包):</p><ul><li>adb (基本操作了, 没有adb就无法通过指令控制手机)</li><li><a href=https://forum.xda-developers.com/t/op8t-oos-kb05aa-ba-da-unbrick-tool-to-restore-your-device-to-oxygenos.4180837/unread>9008救砖包</a> (随时准备好救砖)</li><li><a href=https://download.lineageos.org/kebab>lineage-18.1-20210513-nightly-kebab-signed.zip</a></li><li><a href=https://download.lineageos.org/kebab>lineage-18.1-20210513-recovery-kebab.img</a></li><li><a href="https://www.androidfilehost.com/?fid=2188818919693768129">copy-partitions-20210323_1922.zip</a></li><li><a href=https://wiki.lineageos.org/gapps.html>GAPPS</a></li><li><a href=https://github.com/topjohnwu/Magisk/releases>Magisk-v23.0.apk</a></li></ul><h3 id=具体步骤>具体步骤<a hidden class=anchor aria-hidden=true href=#具体步骤>#</a></h3><p>详细刷机步骤参考 <a href=https://wiki.lineageos.org/devices/kebab/install>官方文档</a> , 下面我将按照具体指令来总结, 这样比较明了, 不用看详细的文字解释:</p><ol><li><p>进入 <code>开发者选项</code> 并开启 <code>OEM 解锁</code> 以及 <code>USB调试</code></p></li><li><p>检测 adb 连接情况后进入 bootloader, 然后解锁手机:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>adb devices
adb reboot bootloader
fastboot devices
fastboot oem unlock
</code></pre></td></tr></table></div></div><p>通过音量键和电源键, 将手机解锁, 手机将清除所有数据, 完成初始化后, 继续进入 <code>开发者选项</code> 并开启 <code>OEM 解锁</code> 以及 <code>USB调试</code></p></li><li><p>重启至 bootloader, 刷入 recovery:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>adb devices
adb reboot bootloader
fastboot devices
fastboot flash recovery lineage-18.1-20210513-recovery-kebab.img
fastboot reboot recovery
</code></pre></td></tr></table></div></div></li><li><p>在 recovery 中, 将 A分区数据复制到 B分区, 避免B分区固件太久导致黑砖, 点击 &ldquo;Apply Update&rdquo;, 然后点击 &ldquo;Apply from ADB&rdquo;:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>adb sideload copy-partitions-20210323_1922.zip
</code></pre></td></tr></table></div></div><blockquote><p>签名验证失败的话, 点击 &ldquo;Yes&rdquo; 继续刷入即可.</p></blockquote><p>点击 &ldquo;Advanced&rdquo;, 然后点击 &ldquo;Reboot to recovery&rdquo;</p></li><li><p>在 recovery 主界面 <strong>点击 &ldquo;Factory Reset&rdquo;</strong> 双清 (不能漏这一步, 某则脏刷将导致各种问题, 我第一次刷忘记双清, 直接 boot loop 加定位失灵), 然后点击 &ldquo;Apply Update&rdquo;, 点击 &ldquo;Apply from ADB&rdquo; 进入 adb sideload 模式刷入 LineageOS:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>adb sideload lineage-18.1-20210513-nightly-kebab-signed.zip 
</code></pre></td></tr></table></div></div><blockquote><p>签名验证失败的话, 点击 &ldquo;Yes&rdquo; 继续刷入即可.</p></blockquote></li><li><p>(可选操作): 刷入额外的包, 如 GAPPS, Magisk等:</p><blockquote><p>如果要刷 GAPPS, 需要在重启进入系统前将其刷入, 其他包则可以在通过系统初始化后重启至 recovery 再刷.</p></blockquote><p>下面将以本次刷机为例, 记录刷入 <code>GAPPS</code> 和 <code>Magisk</code> 的过程:</p><p>重启至 recovery, 然后进入 sideload 模式:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>adb sideload MindTheGapps-11.0.0-arm64-20210412_124247.zip
</code></pre></td></tr></table></div></div><p>在 recovery 主菜单点击 &ldquo;Reboot system now&rdquo;, 即可开机进入系统, 完成初始化后检查谷歌全家桶能否正常运行, 无误后继续以下步骤:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>adb install Magisk-v23.0.apk
adb reboot recovery
</code></pre></td></tr></table></div></div><p>重启至 recovery 后, 进入 sideload 模式, 同时将电脑中的 <code>Magisk-v23.0.apk</code> 复制一份, 改名为 <code>Magisk-v23.0.zip</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>adb sideload Magisk-v23.0.zip
</code></pre></td></tr></table></div></div></li><li><p>在 recovery 主菜单点击 &ldquo;Reboot system now&rdquo;, 即可开机进入系统.</p></li></ol><h3 id=发现的问题>发现的问题<a hidden class=anchor aria-hidden=true href=#发现的问题>#</a></h3><p>刷 LOS 的过程中发现了两个问题, 问题和解决方法如下:</p><ol><li><p>定位不正常</p><p>第一次刷入时忘记双清, 开机直接 boot loop, 解决后进入系统, 第二天上班时差点钉钉打卡无法定位&mldr;</p><p>解决方法: 刷入 LOS 前双清, 切忌 dirty flash.</p></li><li><p>移动网络网速不正常</p><p>第二次刷入时一切正常, 但切换至移动网络时网速只有 200+k/s, 明显不是5G该有的网速, 后到lineage的 reddit 论坛中发现有人有 <a href="https://www.reddit.com/r/LineageOS/comments/nd7qpt/no_mobile_data/?utm_source=share&utm_medium=mweb">同样的情况</a>, 只需根据运营商修改 APN 即可.
刷回 OOS 后, 我进入设置对默认 APN 进行了截图 (此处以联通为例).</p><p><img loading=lazy src=photo_2021-05-17_19-14-27.jpg alt="APN config"></p><p>解决方法: 刷入 LOS 后进入设置, 按照截图修改参数即可.</p></li></ol><h3 id=截图>截图<a hidden class=anchor aria-hidden=true href=#截图>#</a></h3><p>正常使用后的一些截图如下:</p><p>修改 APN 后的 speedtest:</p><p><img loading=lazy src=Snipaste_2021-05-18_00-31-54.jpg alt=speedtest></p><p>更新界面:</p><p><img loading=lazy src=photo_2021-05-17_22-27-23.jpg alt=更新界面></p><p>Magisk 界面:</p><p><img loading=lazy src=photo_2021-05-17_22-27-24.jpg alt="Magisk 界面"></p><h2 id=los-回-oos-并-root>LOS 回 OOS 并 ROOT<a hidden class=anchor aria-hidden=true href=#los-回-oos-并-root>#</a></h2><h3 id=准备-1>准备<a hidden class=anchor aria-hidden=true href=#准备-1>#</a></h3><ul><li>adb (基本操作了, 没有adb就无法通过指令控制手机)</li><li><a href=https://forum.xda-developers.com/t/op8t-oos-kb05aa-ba-da-unbrick-tool-to-restore-your-device-to-oxygenos.4180837/unread>9008救砖包</a> (随时准备好救砖)</li><li><a href=https://github.com/topjohnwu/Magisk/releases>Magisk-v23.0.apk</a></li><li><a href=https://forum.xda-developers.com/t/oneplus-8t-rom-ota-oxygen-os-repo-of-oxygen-os-builds.4193183/>OOS全量包</a> (这里用的是 OOS Open Beta 4)</li><li><a href="https://androidfilehost.com/?fid=818070582850510260">Payload Dumper for Win</a></li></ul><h3 id=具体步骤-1>具体步骤<a hidden class=anchor aria-hidden=true href=#具体步骤-1>#</a></h3><blockquote><p>以下步骤以 LOS 刷至 OOS 为例, 刷机前记得 <strong>做好备份</strong>.</p></blockquote><blockquote><p>参考视频: <a href="https://www.youtube.com/watch?v=zKd_mO7f1eM">https://www.youtube.com/watch?v=zKd_mO7f1eM</a></p></blockquote><ol><li><p>关机, 静置手机待其完全关闭, 电脑解压并打开下载好的 救砖包, 打开 <code>MsmDownloadTool V4.0.exe</code>, 选择 <code>Other</code>并下一步, target 项选择 <code>O2</code>, 表示刷入 OOS.</p></li><li><p>同时按下手机的 <code>音量+</code> 和 <code>音量-</code>, 插入 USB 线与电脑连接, 待出现 COM 口后, 点击 <code>start</code>, 看到开始加载进度条后方可松开音量键, 等待刷机完毕后, 手机将清除所有数据并自动重启.</p></li><li><p>完成初始化后进入系统, 打开 <code>开发者选项</code> 并勾选 <code>OEM 解锁</code> 以及 <code>USB 调试</code>.</p></li><li><p>解锁手机:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>adb decices
adb reboot bootloader
fastboot devices
fastboot oem unlock
</code></pre></td></tr></table></div></div><p>通过音量键和电源键确认解锁手机, 然后完成初始化进入系统.</p></li><li><p>将下载好的 OOS Open Beta 4 全量包放入手机根目录, 进入设置, 系统升级, 选择 <code>从本地更新</code>, 然后选择根目录中的全量包进行 full update, 安装完毕后重启手机.</p></li><li><p>在电脑端, 将下载好的 OOS 全量包中的 <code>payload.bin</code> 置入 &ldquo;/payload_dumper-win64&rdquo; 的 &ldquo;/input&rdquo; 文件夹中, 运行 <code>payload_dumper.exe</code>, 运行完毕后, 在 &ldquo;/output&rdquo; 中找到 <code>boot.img</code> 并复制到手机目录中, 如 &ldquo;/Download&rdquo; 中.</p></li><li><p>安装并打开 &ldquo;Magisk Manager&rdquo;, 在首页点击 &ldquo;安装&rdquo;, 选择 &ldquo;选择并修补一个文件&rdquo;, 选择 &ldquo;/Download/boot.img&rdquo; 后点击 &ldquo;开始&rdquo;, Magisk Manager 将生成一个命名类似 <code>magisk_patch.img</code> 的文件在 &ldquo;/Download&rdquo; 中, 将其复制进电脑.</p></li><li><p>将手机连接至电脑, 输入以下指令:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>adb devices
adb reboot bootloader
fastboot devices
fastboot flash boot magisk_patch.img
</code></pre></td></tr></table></div></div><p>刷入完毕后重启至系统, 打开 Magisk Manager 检查 root 状态.</p><p><img loading=lazy src=Snipaste_2021-05-18_16-17-01.jpg alt=指令一览></p></li></ol><h2 id=结尾>结尾<a hidden class=anchor aria-hidden=true href=#结尾>#</a></h2><p>Root 之后, 又可以玩回很多以前的东西了, 比如把字体改成 Ubuntu 格式, 启用黑域, Swift Backup, Quick Switch等等, 倒是最近的 Xposed 框架又有新的 <code>LSPosed</code>, 简称 &ldquo;LSP&rdquo;, 是个轻量级的框架, 模块商店的模块还很少, 但是装个 WX 模块还是绰绰有余的.</p><p>再说到动画方面, LOS 的动画流畅度简直吊打 OOS 的, 就比如点开微信信息推送和横屏返回桌面的动画, 一经比较便高下立判, OOS 小修小补这么久, 这个导航栏手势改得真是没眼看&mldr;</p><p>当然, 稳定性方面 OOS 肯定是 LOS 比不了的, 毕竟 LOS 只是一个个人维护的第三方 ROM, 没记错的话开发者 Luk1337 已经从一加6一路维护到一加8T了, 不愧是大佬👍</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://cgcel.github.io/tags/android/>android</a></li><li><a href=https://cgcel.github.io/tags/lineageos/>lineageos</a></li><li><a href=https://cgcel.github.io/tags/oxygenos/>oxygenos</a></li><li><a href=https://cgcel.github.io/tags/oneplus8t/>oneplus8t</a></li><li><a href=https://cgcel.github.io/tags/flashing/>flashing</a></li></ul><nav class=paginav><a class=prev href=https://cgcel.github.io/posts/2021/05/22/2021-05-22-%E4%B8%80%E5%8A%A08t%E5%85%A8%E9%87%8F%E5%8C%85%E5%8D%87%E7%BA%A7%E5%B9%B6%E4%BF%9D%E7%95%99root/><span class=title>« Prev Page</span><br><span>一加8T全量包升级并保留ROOT</span></a>
<a class=next href=https://cgcel.github.io/posts/2021/05/13/2021-05-13-%E6%88%91%E7%9A%84-zerotier-network-%E7%AE%A1%E7%90%86-bot/><span class=title>Next Page »</span><br><span>我的 ZeroTier Network 管理 bot</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 从OOS到LOS -- 一加8T的刷机记录 on twitter" href="https://twitter.com/intent/tweet/?text=%e4%bb%8eOOS%e5%88%b0LOS%20--%20%e4%b8%80%e5%8a%a08T%e7%9a%84%e5%88%b7%e6%9c%ba%e8%ae%b0%e5%bd%95&url=https%3a%2f%2fcgcel.github.io%2fposts%2f2021%2f05%2f17%2f2021-05-17-%25E4%25BB%258Eoos%25E5%2588%25B0los-%25E4%25B8%2580%25E5%258A%25A08t%25E7%259A%2584%25E5%2588%25B7%25E6%259C%25BA%25E8%25AE%25B0%25E5%25BD%2595%2f&hashtags=android%2clineageos%2coxygenos%2coneplus8t%2cflashing"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 从OOS到LOS -- 一加8T的刷机记录 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcgcel.github.io%2fposts%2f2021%2f05%2f17%2f2021-05-17-%25E4%25BB%258Eoos%25E5%2588%25B0los-%25E4%25B8%2580%25E5%258A%25A08t%25E7%259A%2584%25E5%2588%25B7%25E6%259C%25BA%25E8%25AE%25B0%25E5%25BD%2595%2f&title=%e4%bb%8eOOS%e5%88%b0LOS%20--%20%e4%b8%80%e5%8a%a08T%e7%9a%84%e5%88%b7%e6%9c%ba%e8%ae%b0%e5%bd%95&summary=%e4%bb%8eOOS%e5%88%b0LOS%20--%20%e4%b8%80%e5%8a%a08T%e7%9a%84%e5%88%b7%e6%9c%ba%e8%ae%b0%e5%bd%95&source=https%3a%2f%2fcgcel.github.io%2fposts%2f2021%2f05%2f17%2f2021-05-17-%25E4%25BB%258Eoos%25E5%2588%25B0los-%25E4%25B8%2580%25E5%258A%25A08t%25E7%259A%2584%25E5%2588%25B7%25E6%259C%25BA%25E8%25AE%25B0%25E5%25BD%2595%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 从OOS到LOS -- 一加8T的刷机记录 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fcgcel.github.io%2fposts%2f2021%2f05%2f17%2f2021-05-17-%25E4%25BB%258Eoos%25E5%2588%25B0los-%25E4%25B8%2580%25E5%258A%25A08t%25E7%259A%2584%25E5%2588%25B7%25E6%259C%25BA%25E8%25AE%25B0%25E5%25BD%2595%2f&title=%e4%bb%8eOOS%e5%88%b0LOS%20--%20%e4%b8%80%e5%8a%a08T%e7%9a%84%e5%88%b7%e6%9c%ba%e8%ae%b0%e5%bd%95"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 从OOS到LOS -- 一加8T的刷机记录 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fcgcel.github.io%2fposts%2f2021%2f05%2f17%2f2021-05-17-%25E4%25BB%258Eoos%25E5%2588%25B0los-%25E4%25B8%2580%25E5%258A%25A08t%25E7%259A%2584%25E5%2588%25B7%25E6%259C%25BA%25E8%25AE%25B0%25E5%25BD%2595%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 从OOS到LOS -- 一加8T的刷机记录 on whatsapp" href="https://api.whatsapp.com/send?text=%e4%bb%8eOOS%e5%88%b0LOS%20--%20%e4%b8%80%e5%8a%a08T%e7%9a%84%e5%88%b7%e6%9c%ba%e8%ae%b0%e5%bd%95%20-%20https%3a%2f%2fcgcel.github.io%2fposts%2f2021%2f05%2f17%2f2021-05-17-%25E4%25BB%258Eoos%25E5%2588%25B0los-%25E4%25B8%2580%25E5%258A%25A08t%25E7%259A%2584%25E5%2588%25B7%25E6%259C%25BA%25E8%25AE%25B0%25E5%25BD%2595%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 从OOS到LOS -- 一加8T的刷机记录 on telegram" href="https://telegram.me/share/url?text=%e4%bb%8eOOS%e5%88%b0LOS%20--%20%e4%b8%80%e5%8a%a08T%e7%9a%84%e5%88%b7%e6%9c%ba%e8%ae%b0%e5%bd%95&url=https%3a%2f%2fcgcel.github.io%2fposts%2f2021%2f05%2f17%2f2021-05-17-%25E4%25BB%258Eoos%25E5%2588%25B0los-%25E4%25B8%2580%25E5%258A%25A08t%25E7%259A%2584%25E5%2588%25B7%25E6%259C%25BA%25E8%25AE%25B0%25E5%25BD%2595%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://cgcel.github.io/>烂杯的博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script></body></html>